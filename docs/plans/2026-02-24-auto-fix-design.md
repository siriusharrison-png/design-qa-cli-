# 自动修复功能设计

> 日期：2026-02-24
> 状态：已确认

## 概述

为 design-qa-cli 添加 `--fix` 参数，自动将硬编码的颜色和字号替换为 CSS 变量。

## 修复范围

| 类型 | 是否自动修复 | 原因 |
|------|-------------|------|
| 颜色 | ✅ 是 | 有明确的变量映射 |
| 字号 | ✅ 是 | 有明确的变量映射 |
| 间距 | ❌ 否 | 只是建议值，非精确映射 |

## 修复规则

```
颜色：#1161fe  →  var(--brand-primary-1)
字号：18px    →  var(--font-size-18)
```

## 命令行接口

```bash
# 只检测（默认）
design-qa check ./src

# 检测并修复
design-qa check ./src --fix
```

## 输出格式

修复模式下，每个问题后显示修复状态：

```
📄 Button.tsx
   🎨 第8行  #1161fe → var(--brand-primary-1)  ✓ 已修复
   📏 第6行  15px → 16px  (间距不自动修复)
```

最终统计：

```
✅ 已修复 2 个问题（颜色: 1, 字号: 1）
⚠️ 剩余 1 个间距问题需手动处理
```

## 技术实现

- 修改 `src/scanner.js`，添加修复逻辑
- 修改 `bin/cli.js`，添加 `--fix` 参数
- 修改 `src/reporter.js`，添加修复状态输出
